import { env } from "./config/env";
import dotenv from "dotenv";
import app from "./app";

dotenv.config();

const PORT = env.PORT;

app.listen(PORT, () => {
  console.log(`
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                                                            â•‘
  â•‘   ðŸª‘  Shiv Furniture Budget Accounting System              â•‘
  â•‘                                                            â•‘
  â•‘   Server running on: http://localhost:${PORT}               â•‘
  â•‘   Environment: ${env.NODE_ENV.padEnd(40)}â•‘
  â•‘                                                            â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  `);
});

// Handle unhandled promise rejections
process.on("unhandledRejection", (err: Error) => {
  console.error("UNHANDLED REJECTION! ðŸ’¥ Shutting down...");
  console.error(err.name, err.message);
  process.exit(1);
});

// Handle uncaught exceptions
process.on("uncaughtException", (err: Error) => {
  console.error("UNCAUGHT EXCEPTION! ðŸ’¥ Shutting down...");
  console.error(err.name, err.message);
  process.exit(1);
});
